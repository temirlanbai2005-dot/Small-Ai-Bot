"""
–ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã: /start, /help
"""

import logging
from telegram import Update
from telegram.ext import ContextTypes
from database.db import update_user_stats
from utils.keyboards import get_main_keyboard

logger = logging.getLogger(__name__)

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /start"""
    user = update.effective_user
    await update_user_stats(user.id, user.username, user.first_name)
    
    welcome_message = f"""
üé® **–ü—Ä–∏–≤–µ—Ç, {user.first_name}!**

–Ø —Ç–≤–æ–π AI-–ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è 3D-–∞—Ä—Ç–∏—Å—Ç–æ–≤ –∏ –∫—Ä–µ–∞—Ç–æ—Ä–æ–≤ –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è!

‚ú® **–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ 2025:**
‚Ä¢ üî• **–¢—Ä–µ–Ω–¥—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** ‚Äî ArtStation + –º—É–∑—ã–∫–∞ –∏–∑ TikTok
‚Ä¢ üìÖ **–ê–≤—Ç–æ–ø–æ—Å—Ç–∏–Ω–≥** –≤ 7+ —Å–æ—Ü—Å–µ—Ç–µ–π
‚Ä¢ ü§ñ **–ö–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞–Ω** —Å AI –Ω–∞ EN/RU
‚Ä¢ ‚è∞ **–£–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
‚Ä¢ üíæ **PostgreSQL** ‚Äî –¥–∞–Ω–Ω—ã–µ –Ω–∞–≤—Å–µ–≥–¥–∞

**–ö–ª–∞—Å—Å–∏–∫–∞:**
‚Ä¢ üí¨ –û–±—â–µ–Ω–∏–µ —Å Google Gemini AI
‚Ä¢ üìù –ó–∞–º–µ—Ç–∫–∏ –∏ –∑–∞–¥–∞—á–∏
‚Ä¢ üé® –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–¥–µ–π –¥–ª—è –∞—Ä—Ç–æ–≤
‚Ä¢ üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ñ–º–∏ –∫–Ω–æ–ø–∫–∏ –Ω–∏–∂–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–∞–Ω–¥—ã! üöÄ
–°–ø—Ä–∞–≤–∫–∞: /help
    """
    
    await update.message.reply_text(
        welcome_message,
        reply_markup=get_main_keyboard(),
        parse_mode='Markdown'
    )

async def help_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /help"""
    user = update.effective_user
    await update_user_stats(user.id, user.username, user.first_name)
    
    help_text = """
üîß **–í—Å–µ –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞:**

**üìù –ó–∞–º–µ—Ç–∫–∏ –∏ –∑–∞–¥–∞—á–∏:**
`/note <—Ç–µ–∫—Å—Ç>` ‚Äî –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–º–µ—Ç–∫—É
`/notes` ‚Äî –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∑–∞–º–µ—Ç–∫–∏
`/delnote <–Ω–æ–º–µ—Ä>` ‚Äî –£–¥–∞–ª–∏—Ç—å –∑–∞–º–µ—Ç–∫—É

`/task <–æ–ø–∏—Å–∞–Ω–∏–µ>` ‚Äî –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
`/tasks` ‚Äî –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏
`/complete <–Ω–æ–º–µ—Ä>` ‚Äî –û—Ç–º–µ—Ç–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π
`/deltask <–Ω–æ–º–µ—Ä>` ‚Äî –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É

**ü§ñ AI –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è:**
`/ask <–≤–æ–ø—Ä–æ—Å>` ‚Äî –°–ø—Ä–æ—Å–∏—Ç—å AI
(–∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ —Ç–µ–∫—Å—Ç)

**üî• –¢—Ä–µ–Ω–¥—ã:**
`/trends` ‚Äî –ü–æ–∫–∞–∑–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã
`/trendsnotify` ‚Äî –í–∫–ª/–≤—ã–∫–ª –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã

**üìÖ –ö–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞–Ω:**
`/contentplan` ‚Äî –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–¥–µ—é –ø–æ—Å—Ç–∞
`/schedule` ‚Äî –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏—é
`/scheduled` ‚Äî –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å
`/editpost <id>` ‚Äî –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç
`/delpost <id>` ‚Äî –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Å—Ç

**‚è∞ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
`/notifications` ‚Äî –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
`/togglenotif <—Ç–∏–ø>` ‚Äî –í–∫–ª/–≤—ã–∫–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

**üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
`/stats` ‚Äî –ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

üí° **–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é!**

üíæ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ PostgreSQL ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ—Ç–µ—Ä—è–µ—Ç—Å—è!
    """
    
    await update.message.reply_text(help_text, parse_mode='Markdown')
